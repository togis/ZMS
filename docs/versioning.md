# Workflow

## Introduction

The key tools for content quality assurance are _workflow_ and _versioning_; 
both approaches go hand in hand in content production: 

* **workflow** ensures that the right person edits or reviews content at the right time, while
* **versioning**  ensures that the history of editing steps remains transparent and traceable.

The workflow concept requires at least two _versions_ of a document:  

1. the _working version_ that is being edited, and
2. the _published version_ (aka "live" version).

When a documents enter the workflow, a copy of the currently published version is created and serves as the working version.  When the document is published, the working version becomes the next live version by irrevocably overwriting the previous 
live version.

## Content States

### Basis States (STATE)

When an editor makes a content change and clicks the save button, the system records this 
change by assigning one of three basic states to the object. Moreover there is the possibility that
no state is assigned. So these basic states are: 

1. `STATE_NEW`
2. `STATE_MODIFIED`
3. `STATE_DELETED`
4. `None` (if no state is assigned)


These states are fundamental and operate independently of any activated workflow.
Once the workflow is activated, _transitions_ become relevant to add more, workflow specific state values 
to the content: if a content object is assigned one of basic states it automatically triggers a virtual transition to enter the workflow process, specifically the transition (tr) `TR_ENTER` for the PAGE container 
of the edited content object.
As a result, the PAGE container, along with the affected content object, is assigned the initial 
workflow status, which is labeled as _changed_ by an activity (ac) status `AC_CHANGED`.


### Activity States (AC)

```
CHANGED
  |
  |----> REQUESTED <------\
  |       |                \
  |-------|---> REJECTED ---\
  |       |       |
  |-------|-------|---> COMMITTED
  |       |       | 
  |-------|-------|--------> ROLLEDBACK
```

Based on the standard workflow shown above, which in principle represents a two-stage
process (plus optional rejection), the interaction of transitions and active workflow states 
can be illustrated: entry into the workflow begins with the transition of the content object 
into the processing state.  After release (commit) or withdrawal (rollback), an object moves to the active statusobject has the active status `AC_COMMITTED` or `AC_ROLLEDBACK`. These are defined as exit criteria 
from the workflow process via the (virtual) transaction `TR_LEAVE` and thus ultimately return to a passive state.

## Transitions (TR)

The ZMS workflow definition is based on the following model: Work steps are manifested 
on the content object in the declaration of a status attribute generated by the 
workflow mechanism. The following principles apply:

1. a workflow is the sequence of predefined state _transitions_ in a logical order - with 
the goal of document release.
2. a workflow step requires a transition from one active workflow state (activity state) of 
the content object to another.
3. starting from the basic state, the workflow always starts automatically with the `TR_ENTER` 
transition, i.e. with the transfer of the object to the active workflow-specific initial state _Changed_.
4. the workflow always ends with the `TR_LEAVE` transition to the target state `AC_COMMITTED` _Released_ 
(corresponds to the empty basic state `None`).



## Selective workflow

# Versioning

## Introduction

Each block object (in the sense of a set of attributes) can be stored in its own version.
This attribute-container has a unique id and this id is referenced by the `ZMSCustom`-container.
An object is designed to have two versions and has attributes containing the id of the corresponding attribute-container:
* `version_live_id` for the current published live-version
* `version_work_id` for the current version in progress
## Numbering
## Versioning without workflow
## Versioning with activated workflow